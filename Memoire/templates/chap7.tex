\section{Pourquoi choisir une base de données document ? }
    \subsection{Les avantages d’une base de données document}
    
Le c\oe ur du projet \COREL est l'éditorialisation d'un corpus de textes juridiques. Une base de données orientée document permet de mettre en avant les documents au même plan que les informations qu'ils contiennent, ce qui est essentiel à un projet d'édition scientifique numérique. De plus, ces bases de données sont généralement structurées au format \XML ou \JSON. Le choix de ce type de base de données entrait donc en concordance avec les données initiales du projet qui se composaient essentiellement de ces deux formats. Par ailleurs, ce choix a également été motivé pour sa praticité : les données étant déjà structurées, la mise en place d'une base de données document ne demandait aucune étape supplémentaire, contrairement à la mise en place d'une base de données relationnelle. 

Toutefois, la mise en place d'une base de données relationnelle n'est pas à exclure sans réflexion. En effet, le projet \COREL vise à mettre en relation des textes et des lois entre eux. Une base de données sous forme de tables, avec des tables de relation, n'est pas sans pertinence pour un tel projet et aurait permis de faciliter la modélisation des liens entre les lois. La mise en relation des lois entre elles à l'aube du projet était représentée par un référencement complexe de liens hypertextes à partir du \genyuan. Afin de consulter les lois liées les unes aux autres à partir de ce référentiel, il est nécessaire de naviguer entre le serveur \IIIF et le référentiel et de multiplier les allers et retours. Une base de données relationnelle aurait permis aux chercheurs en humanités numériques de requêter directement en \SQL. 

La mise en place d'une base de données relationnelle est donc loin d'être inintéressante. Cependant, cette solution ne répondait pas pleinement aux besoins du projet. Bien que le requêtage d'une base de données, pour des documents partageant des liens complexes d'association et de généalogie, soit très intéressant du point de vue des humanités numériques, il n'aurait sans doute pas été exploité par la communauté ciblée par le projet \COREL, les chercheurs en histoire du droit chinois et les sinologues. L'objectif du projet est non seulement de rassembler et de lier ces sources fragmentées et partielles, mais surtout d'en faciliter l'accès et l'exploitation par les chercheurs. La mise en relation des textes et lois entre eux sans l'appui d'outils numériques est un travail long et fastidieux, comme l'a démontré le référentiel mis en place en regard des numérisations des sources. Une base de données relationnelle n'aurait ainsi pas pleinement servi l'objectif du projet : recréer artificiellement un code légal similaire aux sources originales, directement accessible et consultable afin de faciliter le travail de recherche. De plus, la restructuration des sources numériques en une base relationnelle aurait demandé des étapes de restructuration des données supplémentaires. 

Une base de données document, en revanche, offre la possibilité de mettre en relation les lois tout en conservant la structuration du document telle que la connaissent les chercheurs, rendant son exploitation plus instinctive pour le public cible. 

\subsection{Un système de gestion de base de données}

La gestion d'une base de données s'appuie sur un \SGBD. Dans TEI Publisher, un \SGBD est directement intégré à l'application, permettant d'administrer les données du site web (eXist-db) et une \IDE (eXide). Ces outils, à l'instar de TEI Publisher, sont disponibles en ligne à l'installation, documentation à l'appui, ou directement à l'essai, comme c'est le cas pour eXide. Si les chercheurs ne seront pas amenés à coder directement dans eXide en XQuery, le \SGBD est un outil indispensable à la gestion du site web du projet, puisque le site doit continuer d'être alimenté après l'échéance du financement. En plus de bénéficier d'une documentation solide, eXist-db possède une interface simple et facile à prendre en main pour les chercheurs.

En effet, jusqu'à ce jour, les chercheurs continuent d'alimenter le site internet du projet \LSC via \FTP depuis l'éditeur \XML Oxygen et ont donc déjà une expérience de gestion de base de données document. L'interface d'eXide, en plus d'être similaire à Oxygen, propose les mêmes fonctionnalités directement dans TEI Publisher, ce qui simplifie le processus d'ajout ou de modification des documents, puisque les chercheurs devaient naviguer entre Oxygen et le site web \LSC pour mettre à jour à la fois les documents (directement en \XML) et le site (via un bouton \og process \XML \fg). 

 \section{La reconstitution de la législation grâce au XQuery}
    \subsection{La chaîne de traitement envisagée}
L'\IDE, en plus d'offrir aux chercheurs une interface de modifications des données \XML pour mettre à jour les documents, permet également aux développeurs de l'application d'intervenir sur le code source afin de le personnaliser. En effet, le site web du projet pourra se développer essentiellement en interface graphique grâce à TEI Publisher en ce qui concerne la génération des pages \HTML pour l'édition des documents, mais la reconstitution de la législation à partir des sources nécessite de filtrer les données un peu plus précisément. 

Le langage XQuery est un langage de requête qui permet notamment d'interroger une base de données document. Dans le cadre du projet, le XQuery sera utilisé pour filtrer les données \XML par date, afin de reconstituer la législastion pour une date donnée par l'utilisateur. Cette requête, simple en apparence, demande d'intervenir directement sur le code plutôt que de filtrer par prédicat comme il est possible de le faire dans l'interface de TEI Publisher, car les résultats seront générés à la volée, selon la date entrée par l'utilisateur. Prévoir à l'avance le filtrage des données année par année, de 1644 à 1911, en utilisant un prédicat surchargerait le code de l'application et demanderait un travail trop conséquent. 

Les bornes chronologiques de validité de chaque loi étant encodées grâce aux attributs @notBefore et @notAfter, la requête permettra de déterminer si la date donnée en entrée est comprise entre les dates de début et de fin. Si c'est le cas, la loi sera affichée dans la reconstitution du code virtuel, avec à la suite les lois secondaires qui y sont rattachées, elles-aussi filtrées selon leur période de validité.

\subsection{Déterminer les bornes du corpus}

Avant de déterminer la manière de requêter en XQuery pour recréer la législation, il a fallu déterminer les bornes chronologiques réelles des lois présentes du corpus. En effet, la dynastie des Qing s'étend de 1644 à 1911, mais la législation n'a, de fait, pas brutalement été créée en 1644. La loi évolue sous l'influence des époques et se reconstruit sur les bases de la dynastie précédente. En l'occurrence, la législation des Qing est étroitement liée à celle des Ming et certaines lois présentes dans le corpus sont antérieures à 1644. Si le projet \COREL ne vise qu'à étudier la législation sous la dynastie Qing, il est toutefois impossible d'ignorer ses origines plus anciennes. Déterminer les bornes chronologiques d'un corpus d'études relève nécessairement de l'arbitraire. C'est pour cette raison qu'une étude plus approfondie du corpus a été nécessaire, afin d'établir dans un premier temps quelles étaient les bornes chronologiques réelles des lois du corpus. 

Une requête en XQuery a permis de lister toutes les dates présentes dans le \huidian, le seul document du corpus à posséder des dates à l'heure actuelle. 
\bigskip
\begin{minted}{xquery}
declare namespace tei="http://www.tei-c.org/ns/1.0";
for $date in distinct-values( doc("db/TEI_HDSLXB.xml")//tei:date/text())
order by $date
return $date
\end{minted}
\bigskip
Le résultat permet d'établir que la date la plus ancienne mentionnée dans le \huidian est 1616, soit presque trente ans avant le début de notre corpus. Bien que la recréation de la législation dans le cadre du projet \COREL concerne strictement les bornes chronologiques de 1644 à 1911, ce résultat amène à la réflexion suivante : comment retracer la généalogie complète d'une loi en limitant artificiellement les bornes chronologiques du corpus à la dynastie Qing ? Considère-t-on que ces dates arbitraires servent de délimiteurs stricts et que tout ce qui en dépasse le cadre doit être ignoré pour mener à bien le projet ? En suivant cette perspective, il serait alors logique, dans l'encodage, de remplacer toute date antérieure à 1644 par celle-ci. Ce choix pose toutefois un problème d'altération des sources. Le choix de bornes chronologiques propose à l'historien de présenter ses sources à travers un prisme, une vue subjective et personnelle, qui peut parfois sembler injustifiée.

Pour résoudre ce problème, il semble \textit{a priori} que conserver des dates antérieures au début du corpus ne complexifie pas la recréation de la législation sous les Qing. En effet, le site web peut spécifier à l'utilisateur que la génération d'un code légal artificiel n'est valable que pour des bornes chronologiques prédéfinies, en utilisant uniquement les textes de lois produits durant cette période. Toutefois, qu'en est-il des dates de fin ? Tout comme le droit n'est pas soudain apparu en 1644, il n'a pas pris fin en 1911. S'il est possible de trouver des références à la dynastie précédente dans les codes légaux des Qing, il est évident qu'aucune mention du futur n'est présente dans les textes. Pour assurer la cohérence de cette vision subjective de l'histoire, ne faudrait-il pas conserver la date réelle de fin de validité des lois ? Assurément, une telle entreprise ne peut être menée à l'échelle d'un projet : cela demanderait d'outrepasser le corpus prédéfini et d'y inclure des textes postérieurs à 1911, voire d'élargir démesurément le corpus jusque nos jours. De plus, le droit vivant n'ayant jamais de fin, un projet d'une telle envergure serait également infini. Cette problématique est au centre de l'édition scientifique numérique. Elena Pierazzo en fait part à propos de l'édition diplomatique : 

\begin{quote}
    So, we must have limits, and limits represent the boundaries within which the hermeneutic
process can develop. The challenge is therefore to select those limits that allow a model
which is adequate to the scholarly purpose for which it has been created.
\footnote{\cite{pierazzo_rationale_2011}}
\end{quote}

Cette question de cadre ne peut ainsi être résolue par le numérique, qui laisse ouvertes toutes les possibilités, et requiert une intervention humaine et arbitraire. Peut-on considérer que les dates indiquées dans l'encodage n'altèrent en rien la source, qu'elles ne sont que la nécessité d'un projet numérique ? Les réponses sont multiples et chacune n'en est pas moins valide. Dans le cadre du projet, l'édition des codes légaux n'est pas une édition diplomatique. Dès lors, il a été choisi d'utiliser des dates arbitraires pour l'encodage, afin d'assurer la bonne réalisation du projet. De la même manière, des identifiants \XML seront ajoutés à l'encodage \TEI pour permettre de dédoublonner les lois. Ainsi, une même loi du \huidian et du \dc porteront le même identifiant, peu importe le texte d'origine. Ce choix peut sembler peu satisfaisant d'un point de vue scientifique et altérer les sources, mais la reconstitution de codes légaux est artificielle et doit se considérer comme étant la production d'une source nouvelle, autre, qui n'altère en rien les sources originales. 
